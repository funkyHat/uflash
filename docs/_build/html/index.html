<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>uFlash &mdash; uFlash 0.9.18.beta.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9.18.beta.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="uFlash 0.9.18.beta.0 documentation" href="#" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="uflash">
<h1>uFlash<a class="headerlink" href="#uflash" title="Permalink to this headline">¶</a></h1>
<p><strong>THIS MODULE ONLY WORKS WITH PYTHON 3.</strong></p>
<p>A utility for flashing the BBC micro:bit with Python scripts and the
MicroPython runtime. You pronounce the name of this utility &#8220;micro-flash&#8221;. ;-)</p>
<p>It provides two services:</p>
<ol class="arabic simple">
<li>A library of functions to programatically create a hex file and flash it onto a BBC micro:bit.</li>
<li>A command line utility called <cite>uflash</cite> that will flash Python scripts onto a BBC micro:bit.</li>
</ol>
<p>Several essential operations are implemented:</p>
<ul class="simple">
<li>Encode Python into the hex format.</li>
<li>Embed the resulting hexified Python into the MicroPython runtime hex.</li>
<li>Extract an encoded Python script from a MicroPython hex file.</li>
<li>Discover the connected micro:bit.</li>
<li>Copy the resulting hex onto the micro:bit, thus flashing the device.</li>
</ul>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install simply type:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pip install uflash
</pre></div>
</div>
<p>...and the package will download from PyPI. If you wish to upgrade to the
latest version, use the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pip install --no-cache --upgrade uflash
</pre></div>
</div>
</div>
<div class="section" id="command-usage">
<h2>Command Usage<a class="headerlink" href="#command-usage" title="Permalink to this headline">¶</a></h2>
<p>To read help simply type:</p>
<div class="highlight-python"><div class="highlight"><pre>$ uflash help
</pre></div>
</div>
<p>If you type the command on its own then uflash will attempt to find a connected
BBC micro:bit and flash an unmodified version of the MicroPython runtime onto
it:</p>
<div class="highlight-python"><div class="highlight"><pre>$ uflash
Flashing Python to: /media/ntoll/MICROBIT/micropython.hex
</pre></div>
</div>
<p>To flash a version of the MicroPython runtime with a specified script embedded
within it (so that script is run when the BBC micro:bit boots up) then pass
the path to the Python script in as the first argument to the command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ uflash my_script.py
Flashing Python to: /media/ntoll/MICROBIT/micropython.hex
</pre></div>
</div>
<p>At this point uflash will try to automatically detect the path to the device.
However, if you have several devices plugged in and/or know what the path on
the filesystem to the BBC micro:bit already is, you can specify this as a
second argument to the command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ uflash myscript.py /media/ntoll/MICROBIT
Flashing Python to: /media/ntoll/MICROBIT/micropython.hex
</pre></div>
</div>
<p>To extract a Python script from a hex file use the &#8220;-e&#8221; flag like this:</p>
<div class="highlight-python"><div class="highlight"><pre>$ uflash -e something.hex myscript.py
</pre></div>
</div>
<p>This will save the Python script recovered from &#8220;something.hex&#8221; into the file
&#8220;myscript.py&#8221;. If you don&#8217;t supply a target the recovered script will emit to
stdout.</p>
</div>
<div class="section" id="development">
<h2>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h2>
<p>The source code is hosted in GitHub. Please feel free to fork the repository.
Assuming you have Git installed you can download the code from the canonical
repository with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git clone https://github.com/ntoll/uflash.git
</pre></div>
</div>
<p>Ensure you have the correct dependencies for development installed by creating
a virtualenv and running:</p>
<div class="highlight-python"><div class="highlight"><pre>$ pip install -r requirements.txt
</pre></div>
</div>
<p>To locally install your development version of the module into a virtualenv,
run the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ python setup.py develop
</pre></div>
</div>
<p>There is a Makefile that helps with most of the common workflows associated
with development. Typing &#8220;make&#8221; on its own will list the options thus:</p>
<div class="highlight-python"><div class="highlight"><pre>$make

There is no default Makefile target right now. Try:

make clean - reset the project and remove auto-generated assets.
make pyflakes - run the PyFlakes code checker.
make pep8 - run the PEP8 style checker.
make test - run the test suite.
make coverage - view a report on test coverage.
make check - run all the checkers and tests.
make package - create a deployable package for the project.
make publish - publish the project to PyPI.
make docs - run sphinx to create project documentation.
</pre></div>
</div>
</div>
</div>
<div class="section" id="contributing-to-uflash">
<h1>Contributing to uFlash<a class="headerlink" href="#contributing-to-uflash" title="Permalink to this headline">¶</a></h1>
<p>Hey! Many thanks for wanting to improve uFlash.</p>
<p>Contributions are welcome without prejudice from <em>anyone</em> irrespective of
age, gender, religion, race or sexuality. Good quality code and engagement
with respect, humour and intelligence wins every time.</p>
<ul class="simple">
<li>If you&#8217;re from a background which isn&#8217;t well-represented in most geeky groups, get involved - <em>we want to help you make a difference</em>.</li>
<li>If you&#8217;re from a background which <em>is</em> well-represented in most geeky groups, get involved - <em>we want your help making a difference</em>.</li>
<li>If you&#8217;re worried about not being technical enough, get involved - <em>your fresh perspective will be invaluable</em>.</li>
<li>If you think you&#8217;re an imposter, get involved.</li>
<li>If your day job isn&#8217;t code, get involved.</li>
<li>This isn&#8217;t a group of experts, just people. Get involved!</li>
<li>We are interested in educational, social and technical problems. If you are too, get involved.</li>
<li>This is a new community. <em>No-one knows what they are doing</em>, so, get involved.</li>
</ul>
<p>We expect contributors to follow the Python Software Foundation&#8217;s Code of
Conduct: <a class="reference external" href="https://www.python.org/psf/codeofconduct/">https://www.python.org/psf/codeofconduct/</a></p>
<p>Feedback may be given for contributions and, where necessary, changes will
be politely requested and discussed with the originating author. Respectful
yet robust argument is most welcome.</p>
<ul class="simple">
<li>Your code should be commented in <em>plain English</em> (British spelling).</li>
<li>If your contribution is for a major block of work and you&#8217;ve not done so
already, add yourself to the AUTHORS file following the convention found
therein.</li>
<li>Try to include tests!</li>
<li>Have fun!</li>
</ul>
</div>
<div class="section" id="module-uflash">
<span id="api"></span><h1>API<a class="headerlink" href="#module-uflash" title="Permalink to this headline">¶</a></h1>
<p>This module contains functions for turning a Python script into a .hex file
and flashing it onto a BBC micro:bit.</p>
<dl class="function">
<dt id="uflash.embed_hex">
<code class="descclassname">uflash.</code><code class="descname">embed_hex</code><span class="sig-paren">(</span><em>runtime_hex</em>, <em>python_hex=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#embed_hex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.embed_hex" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string representing the MicroPython runtime hex, will embed a
string representing a hex encoded Python script into it.</p>
<p>Returns a string representation of the resulting combination.</p>
<p>Will raise a ValueError if the runtime_hex is missing.</p>
<p>If the python_hex is missing, it will return the unmodified runtime_hex.</p>
</dd></dl>

<dl class="function">
<dt id="uflash.extract">
<code class="descclassname">uflash.</code><code class="descname">extract</code><span class="sig-paren">(</span><em>path_to_hex</em>, <em>output_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#extract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a path_to_hex file this function will attempt to extract the
embedded script from it and save it either to output_path or stdout</p>
</dd></dl>

<dl class="function">
<dt id="uflash.extract_script">
<code class="descclassname">uflash.</code><code class="descname">extract_script</code><span class="sig-paren">(</span><em>embedded_hex</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#extract_script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.extract_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a hex file containing the MicroPython runtime and an embedded Python
script, will extract the original Python script.</p>
<p>Returns a string containing the original embedded script.</p>
</dd></dl>

<dl class="function">
<dt id="uflash.find_microbit">
<code class="descclassname">uflash.</code><code class="descname">find_microbit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#find_microbit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.find_microbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a path on the filesystem that represents the plugged in BBC
micro:bit that is to be flashed. If no micro:bit is found, it returns
None.</p>
<p>Works on Linux, OSX and Windows. Will raise a NotImplementedError
exception if run on any other operating system.</p>
</dd></dl>

<dl class="function">
<dt id="uflash.flash">
<code class="descclassname">uflash.</code><code class="descname">flash</code><span class="sig-paren">(</span><em>path_to_python=None</em>, <em>path_to_microbit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#flash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.flash" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a path to a Python file will attempt to create a hex file and then
flash it onto the referenced BBC micro:bit.</p>
<p>If the path_to_python is unspecified it will simply flash the unmodified
MicroPython runtime onto the device.</p>
<p>If the path_to_microbit is unspecified it will attempt to find the device&#8217;s
path on the filesystem automatically.</p>
<p>If the automatic discovery fails, then it will raise an IOError.</p>
</dd></dl>

<dl class="function">
<dt id="uflash.get_version">
<code class="descclassname">uflash.</code><code class="descname">get_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#get_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.get_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string representation of the version information of this project.</p>
</dd></dl>

<dl class="function">
<dt id="uflash.hexlify">
<code class="descclassname">uflash.</code><code class="descname">hexlify</code><span class="sig-paren">(</span><em>script</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#hexlify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.hexlify" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the byte content of a Python script and returns a hex encoded
version of it.</p>
<p>Based on the hexlify script in the microbit-micropython repository.</p>
</dd></dl>

<dl class="function">
<dt id="uflash.main">
<code class="descclassname">uflash.</code><code class="descname">main</code><span class="sig-paren">(</span><em>argv=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Entry point for the command line tool &#8216;uflash&#8217;.</p>
<p>Will print help text if the optional first argument is &#8220;help&#8221;. Otherwise
it will ensure the optional first argument ends in &#8221;.py&#8221; (the source
Python script).</p>
<p>An optional second argument is used to reference the path to the micro:bit
device. Any more arguments are ignored.</p>
<p>Exceptions are caught and printed for the user.</p>
</dd></dl>

<dl class="function">
<dt id="uflash.save_hex">
<code class="descclassname">uflash.</code><code class="descname">save_hex</code><span class="sig-paren">(</span><em>hex_file</em>, <em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#save_hex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.save_hex" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string representation of a hex file, this function copies it to
the specified path thus causing the device mounted at that point to be
flashed.</p>
<p>If the hex_file is empty it will raise a ValueError.</p>
<p>If the filename at the end of the path does not end in &#8216;.hex&#8217; it will raise
a ValueError.</p>
</dd></dl>

<dl class="function">
<dt id="uflash.unhexlify">
<code class="descclassname">uflash.</code><code class="descname">unhexlify</code><span class="sig-paren">(</span><em>blob</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/uflash.html#unhexlify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#uflash.unhexlify" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a hexlified script and turns it back into a string of Python code.</p>
</dd></dl>

</div>
<div class="section" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h1>
<p>Copyright (c) 2015 Nicholas H.Tollervey and others.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the &#8220;Software&#8221;), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &#8220;AS IS&#8221;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">uFlash</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#command-usage">Command Usage</a></li>
<li><a class="reference internal" href="#development">Development</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contributing-to-uflash">Contributing to uFlash</a></li>
<li><a class="reference internal" href="#module-uflash">API</a></li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Nicholas H.Tollervey.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/index.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>